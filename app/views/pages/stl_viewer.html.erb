<% title "STL Viewer" %>

<div id="canvas_container"></div>

<p>
  <%= label_tag "stl_data", "STL Data" %>
  <%= text_area_tag "stl_data", "solid
    facet normal -1.000000 0.000000 0.000000
      outer loop
        vertex -5.000000 -5.000000 5.000000
        vertex -5.000000 5.000000 5.000000
        vertex -5.000000 -5.000000 -5.000000
      endloop
    endfacet
    facet normal -1.000000 -0.000000 0.000000
      outer loop
        vertex -5.000000 -5.000000 -5.000000
        vertex -5.000000 5.000000 5.000000
        vertex -5.000000 5.000000 -5.000000
      endloop
    endfacet
    facet normal 0.000000 0.000000 1.000000
      outer loop
        vertex -5.000000 -5.000000 5.000000
        vertex 5.000000 -5.000000 5.000000
        vertex 5.000000 5.000000 5.000000
      endloop
    endfacet
    facet normal 0.000000 -0.000000 1.000000
      outer loop
        vertex -5.000000 5.000000 5.000000
        vertex -5.000000 -5.000000 5.000000
        vertex 5.000000 5.000000 5.000000
      endloop
    endfacet
    facet normal -0.000000 -1.000000 0.000000
      outer loop
        vertex -5.000000 -5.000000 -5.000000
        vertex 5.000000 -5.000000 -5.000000
        vertex 5.000000 -5.000000 5.000000
      endloop
    endfacet
    facet normal 0.000000 -1.000000 0.000000
      outer loop
        vertex -5.000000 -5.000000 5.000000
        vertex -5.000000 -5.000000 -5.000000
        vertex 5.000000 -5.000000 5.000000
      endloop
    endfacet
    facet normal 0.000000 0.000000 -1.000000
      outer loop
        vertex -5.000000 5.000000 -5.000000
        vertex 5.000000 5.000000 -5.000000
        vertex -5.000000 -5.000000 -5.000000
      endloop
    endfacet
    facet normal -0.000000 0.000000 -1.000000
      outer loop
        vertex -5.000000 -5.000000 -5.000000
        vertex 5.000000 5.000000 -5.000000
        vertex 5.000000 -5.000000 -5.000000
      endloop
    endfacet
    facet normal 0.000000 1.000000 -0.000000
      outer loop
        vertex -5.000000 5.000000 5.000000
        vertex 5.000000 5.000000 5.000000
        vertex -5.000000 5.000000 -5.000000
      endloop
    endfacet
    facet normal 0.000000 1.000000 0.000000
      outer loop
        vertex -5.000000 5.000000 -5.000000
        vertex 5.000000 5.000000 5.000000
        vertex 5.000000 5.000000 -5.000000
      endloop
    endfacet
    facet normal 1.000000 0.000000 0.000000
      outer loop
        vertex 5.000000 -5.000000 -5.000000
        vertex 5.000000 5.000000 -5.000000
        vertex 5.000000 5.000000 5.000000
      endloop
    endfacet
    facet normal 1.000000 0.000000 -0.000000
      outer loop
        vertex 5.000000 -5.000000 5.000000
        vertex 5.000000 -5.000000 -5.000000
        vertex 5.000000 5.000000 5.000000
      endloop
    endfacet
  endsolid
  ", :style => "width:100%;height:300px" %><br/>

  <%= button_to_function "Render", "load_stl_mesh(document.getElementById('stl_data').value);" %><br/>
</p>

<pre><p id="debug"></p></pre>
